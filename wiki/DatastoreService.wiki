= Datastore Service =

Další možností pro práci s daty na App Engine je `DatasoterService`.

== Instance Datastore Service ==
Hlavní třídou pro práci je `DatasotreService`, její instanci získáme takto:
{{{
    DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();
}}}

== Práce s entitami ==
Pro ukládání dat se používá třída `Entity`. Ta má dvě důležité metody: `setProperty(String propertyName, Object value)` a `getProperty(String propertyName)`, pomocí nich lze nastavit hodnoty a o práci s entitou stará `DatastoreService`. Třída je deklarována jako `final`, takže ji nelze rozšířit.

Získání entity z uložiště podle klíče:
{{{
    try {
        Entity entity = datastore.get(key);
    } catch (EntityNotFoundException e) {
        ...
    }
}}}

Uložení entity lze provést následujícím způsobem:
{{{
    datastore.put(entity);
}}}

Naopak pro smazání je potřeba znát klíč:
{{{
    datastore.delete(key);
}}}

<wiki:comment>
{{{
    // Lookup data by known key name
    Entity userEntity = datastore.get(KeyFactory.createKey("UserInfo", email));

    // Or perform a query
    Query query = new Query("Task", userEntity);
    query.addFilter("dueDate", Query.FilterOperator.LESS_THAN, today);
    for (Entity taskEntity : datastore.prepare(query).asIterable()) {
    }
}}}
</wiki:comment>